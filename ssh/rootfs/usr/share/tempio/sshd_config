# This is the sshd server system-wide configuration file.  See
# sshd_config(5) for more information.

# Logging
LogLevel INFO

# Default
AllowTcpForwarding {{ if .server.tcp_forwarding }}yes{{ else }}no{{ end }}
GatewayPorts no
X11Forwarding no

Subsystem       sftp    /usr/lib/ssh/sftp-server

# Authentication:
PermitRootLogin yes

Banner none
PrintMotd no

{{ if .password }}
PasswordAuthentication yes
PermitEmptyPasswords no
{{ else }}
PasswordAuthentication no
{{ end }}

PermitUserEnvironment SUPERVISOR_TOKEN

{{ if .server.trusted_user_ca_keys }}
TrustedUserCAKeys /etc/ssh/ssh_ca.pub
{{ if .server.authorized_principals }}AuthorizedPrincipalFiles /etc/ssh/principals{{ end }}
{{ end }}
